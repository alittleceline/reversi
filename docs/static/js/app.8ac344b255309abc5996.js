webpackJsonp([1],{NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={};a.d(r,"initGame",function(){return C}),a.d(r,"updateNextPlayer",function(){return S}),a.d(r,"updateBoard",function(){return g}),a.d(r,"updateAttacks",function(){return N});var n=a("7+uW"),s=a("Dd8w"),i=a.n(s),o=a("NYxO"),u={name:"GameSquare",props:{value:{type:Number,required:!0},isAttackable:{type:Number,required:!0}},computed:{squareState:function(){var t="empty";return 3===this.isAttackable&&(t="playable"),1===this.value&&(t="black"),2===this.value&&(t="white"),t}}},c={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{class:this.squareState})},staticRenderFns:[]};var l={name:"GameBoard",components:{GameSquare:a("VU/8")(u,c,!1,function(t){a("jJ45")},null,null).exports},props:{board:{type:Array,required:!0},attacks:{type:Array,required:!0}}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"gameboard-container"},t._l(t.board,function(e,r){return a("div",{key:r,staticClass:"gameboard-row"},t._l(e,function(e,n){return a("game-square",{key:n,staticClass:"gameboard-square",attrs:{value:e,"is-attackable":t.attacks[r][n]},nativeOn:{click:function(e){t.$root.$emit("player-played",{x:n,y:r})}}})}))}))},staticRenderFns:[]};var d=[-1,0,1,-1,1,-1,0,1],f=[-1,-1,-1,0,0,1,1,1],m=function(t){return t.map(function(t){return t.slice()})},y=function(t,e,a){for(var r=0;r<d.length;r+=1)for(var n=!1,s=a.x,i=a.y,o=0,u=0;u<8&&(i+=f[r],!((s+=d[r])<0||s>=8||i<0||i>=8))&&0!==(o=t[i][s]);u+=1){if(o===e){if(n)return 3;break}n=!0}return 0},v={name:"App",data:function(){return{impossibleTurns:0,gameStopped:!1}},components:{GameBoard:a("VU/8")(l,p,!1,function(t){a("tCa9")},null,null).exports},created:function(){this.restart()},mounted:function(){var t=this;this.$root.$on("player-played",function(e){t.play(t.myBoard,t.currentPlayer,e)})},beforeDestroy:function(){this.$root.$off("player-played")},methods:i()({},Object(o.b)(["initGame","updateBoard","updateAttacks","updateNextPlayer"]),{restart:function(){this.initGame();var t=this.listValidMoves(this.myBoard,this.player);this.updateAttacks(t.validMoves)},pass:function(){this.nextPlayer();var t=this.listValidMoves(this.myBoard,this.player);this.checkIfPlayable(t.hasValidMoves),this.updateAttacks(t.validMoves)},listValidMoves:function(t,e){for(var a=!1,r=m(t),n=0;n<8;n+=1)for(var s=0;s<8;s+=1){var i={x:s,y:n};0===r[i.y][i.x]&&y(t,e,i)&&(r[i.y][i.x]=3,a=!0)}return{hasValidMoves:a,validMoves:r}},play:function(t,e,a){if(3===m(this.myAttacks)[a.y][a.x]){var r=function(t,e,a){for(var r=m(t),n=1===e?2:1,s=[{y:a.y,x:a.x}],i=0;i<d.length;i+=1)for(var o=a.y,u=a.x,c=0;c<8;c+=1){if(o+=f[i],(u+=d[i])<0||u>=8||o<0||o>=8){s=[{y:a.y,x:a.x}];break}var l=t[o][u];if(0===l){s=[{y:a.y,x:a.x}];break}l===n?s.push({y:o,x:u}):s.forEach(function(t){r[t.y][t.x]=e})}return s=[],r}(t,e,a);this.updateBoard(r);var n=1===this.player?2:1,s=this.listValidMoves(r,n);this.updateAttacks(s.validMoves),this.checkIfPlayable(s.hasValidMoves),this.nextPlayer()}},checkIfPlayable:function(t){t&&this.impossibleTurns<2?this.impossibleTurns=0:!t&&this.impossibleTurns<2?this.impossibleTurns+=1:this.gameStopped=!0,this.playerPiecesCounter(1)+this.playerPiecesCounter(2)===64&&(this.gameStopped=!0)},nextPlayer:function(){var t=1===this.player?2:1;this.updateNextPlayer(t)},playerPiecesCounter:function(t){return this.myBoard.reduce(function(e,a){return e+a.filter(function(e){return e===t}).length},0)}}),computed:i()({},Object(o.c)(["board","attacks","player"]),{playerOne:function(){return 1},playerTwo:function(){return 2},myBoard:function(){return m(this.board)},myAttacks:function(){return m(this.attacks)},currentPlayer:function(){return this.player},currentPlayersColor:function(){return 1===this.currentPlayer?"black":"white"}})},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("h1",{domProps:{textContent:t._s("Reversi")}}),t._v(" "),t.gameStopped?t._e():a("h2",[t._v(t._s(t.currentPlayersColor)+" player's turn")]),t._v(" "),a("section",{class:{layer:!t.gameStopped&&t.impossibleTurns}},[t.gameStopped?a("p",{domProps:{textContent:t._s("Game over! Restart?")}}):t._e(),t._v(" "),!t.gameStopped&&t.impossibleTurns?a("p",{domProps:{textContent:t._s("No moves available, please pass.")}}):t._e(),t._v(" "),a("div",[a("button",{staticClass:"btn",class:{"btn-main":!t.gameStopped&&t.impossibleTurns},domProps:{textContent:t._s("Restart game")},on:{click:function(e){t.restart()}}}),t._v(" "),!t.gameStopped&&t.impossibleTurns?a("button",{staticClass:"btn",class:{"btn-main":!t.gameStopped&&t.impossibleTurns},domProps:{textContent:t._s("Pass")},on:{click:function(e){t.pass()}}}):t._e()])]),t._v(" "),a("p",[t._v(" black pieces: "+t._s(t.playerPiecesCounter(t.playerOne))+", white pieces: "+t._s(t.playerPiecesCounter(t.playerTwo)))]),t._v(" "),a("game-board",{attrs:{board:t.myBoard,attacks:t.myAttacks}})],1)},staticRenderFns:[]};var b,_=a("VU/8")(v,h,!1,function(t){a("TCN2")},null,null).exports,T=a("bOdI"),k=a.n(T),A=(b={},k()(b,"SET_PLAYER_TURN",function(t,e){t.player=e}),k()(b,"INIT_BOARD",function(t,e){t.board=e}),k()(b,"INIT_ATTACKS",function(t,e){t.attacks=e}),k()(b,"UPDATE_BOARD",function(t,e){t.board=e}),k()(b,"UPDATE_ATTACKS",function(t,e){t.attacks=e}),b),P=[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,2,1,0,0,0],[0,0,0,1,2,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],x=[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],C=function(t){var e=t.commit;e("INIT_BOARD",P),e("INIT_ATTACKS",x),e("SET_PLAYER_TURN",1)},S=function(t,e){(0,t.commit)("SET_PLAYER_TURN",e)},g=function(t,e){(0,t.commit)("UPDATE_BOARD",e)},N=function(t,e){(0,t.commit)("UPDATE_ATTACKS",e)};n.a.use(o.a);var R=new o.a.Store({state:{board:[],attacks:[],player:1},mutations:A,actions:r,getters:{board:function(t){return t.board},attacks:function(t){return t.attacks},player:function(t){return t.player}}});n.a.config.productionTip=!1,new n.a({el:"#app",components:{App:_},template:"<App/>",store:R})},TCN2:function(t,e){},jJ45:function(t,e){},tCa9:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.8ac344b255309abc5996.js.map